<div class="row">
  <div class="col-8">
    <div class="row">

      <div class="col-2">
        <!-- Application Type -->
        <%= form.label :application_type_id, "Type" %>
        <%= form.collection_select :application_type_id,
                               ApplicationType.ordered,
                               :id,
                               :application_type,
                               { prompt: "Select" },
                               { required: true } %>
      </div>

      <div class="col">
        <!-- Reference Number -->
        <%= form.label :reference_number, "Reference no." %>
        <%= form.text_field :reference_number, { required: true } %>
      </div>

      <div class="col">
        <!-- Converted to/from -->
        <%= form.label :converted_to_from, "Converted to/from" %>
        <div class="input-group">
          <%= form.text_field :converted_to_from %>
          <% if @converted_application.present? %>
            <%= link_to "Go to",
            edit_application_path(@converted_application),
            class: "btn btn-sm btn-outline-secondary" %>
          <% end %>
        </div>
      </div>

      <div class="col">
        <!-- Date Entered -->
        <%= form.label :created_at, "Date entered" %>
        <%= form.date_field :created_at %>
      </div>
    </div>
    <div class="row">

      <div class="col">
        <!-- Applicant -->
        <%= form.label :applicant_name, "Applicant" %>
        <%= form.text_field :applicant_name, list: "clients" %>
      </div>

      <div class="col">
        <!-- Council -->
        <%= form.label :council %>
        <%= form.text_field :council_name, list: "councils" %>
      </div>

      <div class="col">
        <!-- DA Number -->
        <%= form.label :development_application_number, "DA number" %>
        <%= form.text_field :development_application_number %>
      </div>
    </div>
    <div class="row">

      <div class="col">
        <!-- Owner -->
        <%= form.label :owner_name, "Owner" %>
        <%= form.text_field :owner_name, list: "clients" %>
      </div>

      <div class="col">
        <!-- Number of Storeys -->
        <%= form.label :number_of_storeys %>
        <%= form.text_field :number_of_storeys,
                        type: "number",
                        min: "0",
                        max: "99",
                        step: "1" %>
      </div>

      <div class="col">
        <!-- Construction Value -->
        <%= form.label :construction_value, "Construction value ($)" %>
        <%= form.text_field :construction_value,
                        type: "number",
                        min: "0",
                        max: "1000000000",
                        step: "any" %>
      </div>
    </div>
    <div class="row">

      <div class="col">
        <!-- Contact -->
        <%= form.label :contact_name, "Contact" %>
        <%= form.text_field :contact_name, list: "clients" %>
      </div>

      <div class="col">
        <!-- Fee amount -->
        <%= form.label :fee_amount, "Fee amount ($)" %>
        <%= form.text_field :fee_amount, type: "number", min: "1", step: "any" %>
      </div>

      <div class="col">
        <!-- Applicant Email -->
        <%= form.label :applicant_email %>
        <%= form.text_field :applicant_email %>
      </div>
    </div>
    <div class="row">

      <div class="col-2">
        <!-- Lot number -->
        <%= form.label :lot_number %>
        <%= form.text_field :lot_number %>
      </div>

      <div class="col-2">
        <!-- Street number -->
        <%= form.label :street_number %>
        <%= form.text_field :street_number %>
      </div>

      <div class="col">
        <!-- Street name -->
        <%= form.label :street_name %>
        <%= form.text_field :street_name %>
      </div>

      <div class="col">
        <!-- Suburb -->
        <%= form.label :suburb_display_name, "Suburb" %>
        <%= form.text_field :suburb_display_name, list: "suburbs" %>
      </div>
    </div>
    <div class="row">

      <div class="col-2">
        <!-- Staged consent -->
        <%= form.label :staged_consent, "Staged consent?", class: "w-100" %>
        <%= form.check_box :staged_consent %>
      </div>

      <div class="col-2">
        <!-- Engagement form -->
        <%= form.label :engagement_form, "Engagement form?", class: "w-100" %>
        <%= form.check_box :engagement_form %>
      </div>

      <div class="col">
        <!-- Job type administration -->
        <%= form.label :job_type_administration %>
        <%= form.select :job_type_administration, Application::JOB_TYPE_ADMINISTRATION %>
      </div>

      <div class="col">
        <!-- Quote accepted date -->
        <%= form.label :quote_accepted_date %>
        <%= form.date_field :quote_accepted_date %>
      </div>

    </div>
  </div>
  <div class="col-4 d-flex flex-column" style="max-height: 23em">
    <div class="h-50 mb-3 card" style="overflow: auto">
      <!-- Additional information -->
      <table class="table nested-table">
        <thead style="position: sticky; top: 0; z-index: 1;">
          <tr>
            <th class="fw-normal small">
              <div class="ps-2 pb-2">Additional information</div>
            </th>
            <th></th>
            <th class="text-center" style="max-width:3em">
              <%= link_to_add_association "Add",
              form,
              :application_additional_informations,
              "data-association-insertion-node": ".additional-information-fields",
              "data-association-insertion-method": "append",
              class: "btn btn-sm btn-outline-primary m-2" %>
            </th>
          </tr>
        </thead>
        <tbody class="additional-information-fields">
          <%= form.fields_for :application_additional_informations do |additional_information_form| %>
            <%= render "application_additional_information_fields",
            f: additional_information_form %>
          <% end %>
        </tbody>
      </table>
    </div>

    <div class="h-50 card" style="overflow: auto">
      <!-- Uploaded -->
      <h2 class="fw-normal form-label small">Uploaded</h2>
    </div>
  </div>
</div>

<datalist id="clients">
  <% @clients.each do |client| %>
    <option value="<%= client %>"/>
  <% end %>
  <option value=""/>
</datalist>

<datalist id="councils">
  <% @councils.each do |council| %>
    <option value="<%= council %>"/>
  <% end %>
  <option value=""/>
</datalist>

<datalist id="suburbs">
  <% @suburbs.each do |suburb| %>
    <option value="<%= suburb %>"/>
  <% end %>
  <option value=""/>
</datalist>
