<div class="h-100" style="overflow: auto; position: relative">
  <table
    class="table table-hover applications-table m-0"
    aria-label="Table containing all the applications">
    <thead style="position: sticky; top: 0; z-index: 1;">
      <tr>
        <th style="max-width: 9ch">Reference number</th>
        <th>Location</th>
        <th>Suburb</th>
        <th>Description</th>
        <th>Applicant</th>
        <th style="max-width: 11ch">Date created</th>
        <th style="max-width: 11ch">Latest RFI</th>
        <th style="max-width: 11ch">Latest additional info</th>
        <th style="max-width: 14ch">Engineer certificate received</th>
        <th style="max-width: 11ch">Invoices outstanding</th>
        <th
          style="max-width: <%= Application::BUILDING_SURVEYOR.map(&:length).max %>ch">Building surveyor</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @applications.each do |application| %>
        <tr
          data-controller="navigatable"
          data-navigatable-path-param="<%= edit_application_path(application) %>"
          data-action="click->navigatable#navigate"
          style="cursor: pointer">
          <td class="text-truncate" style="max-width: 9ch">
            <%= application.reference_number %>
          </td>
          <td class="text-truncate" style="max-width: 8vw">
            <%= application.location %>
          </td>
          <td class="text-truncate" style="max-width: 8vw">
            <%= application.suburb&.display_name %>
          </td>
          <td class="text-truncate" style="max-width: 18vw">
            <%= application.description %>
          </td>
          <td class="text-truncate" style="max-width: 8vw">
            <%= application.applicant&.client_name %>
          </td>
          <td class="text-truncate" style="max-width: 11ch">
            <%= application.created_at.strftime('%-d %b %Y') %>
          </td>
          <td class="text-truncate" style="max-width: 11ch">
            <%= application.request_for_information_date&.strftime('%-d %b %Y') %>
          </td>
          <td class="text-truncate" style="max-width: 11ch">
            <%= application.info_date&.strftime('%-d %b %Y') %>
          </td>
          <td class="text-truncate" style="max-width: 11ch">
            <%= application.engineer_certificate_received&.strftime('%-d %b %Y') %>
          </td>
          <td class="text-truncate" style="max-width: 11ch">
            <%= application.unpaid_invoices_count %>
          </td>
          <td
            class="text-truncate"
            style="max-width: <%= Application::BUILDING_SURVEYOR.map(&:length).max %>ch">
            <%= application.building_surveyor %>
          </td>
          <td>
            <button class="btn btn-sm btn-outline-secondary py-0 mx-2">
              Edit
            </button>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
